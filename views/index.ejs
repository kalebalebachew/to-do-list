<!DOCTYPE html>
<head>
<title>Todo App</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>
<body>
<div class="todo-container" style="max-width: 600px; margin: 0 auto; padding: 20px;">
<h2 style="text-align: center;">To-Do List</h2>
<div class="todo">
<form action="/tasks" method="POST" class="todo-header" style="display: flex; justify-content: center; align-items: center;">
<input type="text" name="content" style="flex: 1; padding: 10px; margin-right: 5px;">
<button type="submit" class="btn btn-outline-success">Add task</button>
</form>
<table class="table table-striped table-responsive" style="margin-top: 20px;">
  <thead>
    <tr>
      <th>Tasks</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% tasks.forEach(task => { %>
    <tr>
      <td><%= task.Task %></td>
      <td>
        <button onclick="deleteTask('<%= task._id %>')" class="btn btn-danger">Delete</button>
      </td>
    </tr>
    <% }); %>
  </tbody>
</table>
</div>


<script>
 
  function deleteTask(taskId) {
    fetch('/delete', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ taskId: taskId })
    })
      .then(response => response.json())
      .then(deletedTask => {
        
        console.log('Deleted Task:', deletedTask);

        window.location.reload();
      })
      .catch(error => {
        
        console.error('Error deleting task:', error);
      });
  }
</script>

</body>
</html>
